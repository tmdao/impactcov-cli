{"version":3,"sources":["../src/lib/fsutils.ts"],"sourcesContent":["import fs from 'fs-extra';\nimport path from 'path';\n\nexport const CWD = process.cwd();\nexport const DOT_DIR = path.join(CWD, '.impactcov');\nexport const CACHE_MAP = path.join(DOT_DIR, 'coverage-map.jsonl');\nexport const LOCAL_REPORT = path.join(DOT_DIR, 'report.json');\n\nexport async function ensureDotDir() {\n  await fs.ensureDir(DOT_DIR);\n}\n\nexport async function readJSON<T>(p: string, def: T): Promise<T> {\n  try {\n    const c = await fs.readFile(p, 'utf8');\n    return JSON.parse(c) as T;\n  } catch {\n    return def;\n  }\n}\n\nexport async function writeJSON<T>(p: string, data: T) {\n  await fs.ensureDir(path.dirname(p));\n  await fs.writeFile(p, JSON.stringify(data, null, 2), 'utf8');\n}\n\nexport async function appendLines(p: string, lines: string[]) {\n  await fs.ensureDir(path.dirname(p));\n  await fs.appendFile(p, lines.join('\\n') + '\\n', 'utf8');\n}\n"],"mappings":";AAAA,OAAO,QAAQ;AACf,OAAO,UAAU;AAEV,IAAM,MAAM,QAAQ,IAAI;AACxB,IAAM,UAAU,KAAK,KAAK,KAAK,YAAY;AAC3C,IAAM,YAAY,KAAK,KAAK,SAAS,oBAAoB;AACzD,IAAM,eAAe,KAAK,KAAK,SAAS,aAAa;AAE5D,eAAsB,eAAe;AACnC,QAAM,GAAG,UAAU,OAAO;AAC5B;AAEA,eAAsB,SAAY,GAAW,KAAoB;AAC/D,MAAI;AACF,UAAM,IAAI,MAAM,GAAG,SAAS,GAAG,MAAM;AACrC,WAAO,KAAK,MAAM,CAAC;AAAA,EACrB,QAAQ;AACN,WAAO;AAAA,EACT;AACF;AAEA,eAAsB,UAAa,GAAW,MAAS;AACrD,QAAM,GAAG,UAAU,KAAK,QAAQ,CAAC,CAAC;AAClC,QAAM,GAAG,UAAU,GAAG,KAAK,UAAU,MAAM,MAAM,CAAC,GAAG,MAAM;AAC7D;AAEA,eAAsB,YAAY,GAAW,OAAiB;AAC5D,QAAM,GAAG,UAAU,KAAK,QAAQ,CAAC,CAAC;AAClC,QAAM,GAAG,WAAW,GAAG,MAAM,KAAK,IAAI,IAAI,MAAM,MAAM;AACxD;","names":[]}